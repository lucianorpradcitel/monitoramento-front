<div class="dashboard-container">
  
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <div>
        <img src="assets/rodape-clientes.svg">
        <p class="subtitle">Acompanhe os logs de integra√ß√£o em tempo real</p>
      </div>
     
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading()" class="loading">
    <p>Carregando dados...</p>
  </div>

  <!-- Tabs -->
  <div *ngIf="!loading()" class="tabs-wrapper">
    
    <!-- Tab Navigation -->
    <div class="tabs-nav">
      <button 
        class="tab-btn" 
        [class.active]="activeTab() === 'pedidos'"
        (click)="setActiveTab('pedidos')">
        <span class="tab-icon">üì¶</span>
        <span>Pedidos</span>
        <span *ngIf="pedidosErroCount() > 0" class="badge-count">{{ pedidosErroCount() }}</span>
      </button>

      <button 
        class="tab-btn" 
        [class.active]="activeTab() === 'produtos'"
        (click)="setActiveTab('produtos')">
        <span class="tab-icon">üè∑Ô∏è</span>
        <span>Produtos</span>
        <span *ngIf="produtosErroCount() > 0" class="badge-count">{{ produtosErroCount() }}</span>
      </button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content-wrapper">
      
      <!-- Pedidos Tab -->
      <div *ngIf="activeTab() === 'pedidos'" class="tab-content">
        <h2>Pedidos com Erro</h2>
        
        <div *ngIf="pedidosComErro().length === 0" class="empty-state">
          <p>‚úÖ Nenhum pedido com erro hoje!</p>
        </div>

        <table *ngIf="pedidosComErro().length > 0">
          <thead>
            <tr>
              <th>C√≥digo Pedido</th>
              <th>Cliente</th>
              <th>Plataforma</th>
              <th>Status</th>
              <th>Erro</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let pedido of pedidosComErro()">
              <td class="code">{{ pedido.codigoPedido }}</td>
              <td>{{ pedido.cliente.toUpperCase() }}</td>
              <td>{{ pedido.plataforma?.toUpperCase() || 'Plataforma desconhecida' }}</td>
              <td>
                <span class="status-badge" [class.error]="pedido.status !== 200">
                  <span class="status-dot" [class.dot-error]="pedido.status !== 200"></span>
                  {{ pedido.status }}
                </span>
              </td>
              <td class="text-muted">{{ pedido.erro || 'Erro desconhecido' }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Produtos Tab -->
      <div *ngIf="activeTab() === 'produtos'" class="tab-content">
        <h2>Produtos com Erro</h2>
        
        <div *ngIf="produtosComErro().length === 0" class="empty-state">
          <p>‚úÖ Nenhum produto com erro hoje!</p>
        </div>

        <table *ngIf="produtosComErro().length > 0">
          <thead>
            <tr>
              <th>C√≥digo Produto</th>
              <th>Cliente</th>
              <th>Plataforma</th>
              <th>Data/Hora</th>
              <th>Erro</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let produto of produtosComErro()">
              <td class="code">{{ produto.codigoProduto }}</td>
              <td>{{ produto.cliente.toUpperCase() }}</td>
              <td>{{ produto.plataforma.toUpperCase() }}</td>
              <td class="timestamp">{{ produto.dataErro | date:'dd/MM/yyyy HH:mm' }}</td>            
              <td class="text-muted">{{ produto.erro.toUpperCase() }}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>